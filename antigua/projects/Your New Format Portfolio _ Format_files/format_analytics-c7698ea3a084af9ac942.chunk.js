/*! For license information please see format_analytics-c7698ea3a084af9ac942.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{2637:function(t,e,n){"use strict";var o=n(3312);window.FormatAnalytics=o.FormatAnalytics},3312:function(t,e,n){"use strict";n.r(e),n.d(e,"FormatAnalytics",(function(){return v}));n(809);var o=n(907),i=n.n(o),r=200,a=4;const c="first_visit_channel_url",s="first_visit_channel_referrer",u="last_visit_channel_referrer",l=function(t){return"undefined"!==typeof i.a.get(t)},d=function(t){const{anonymousId:e,currentUrl:n,referrer:o,callback:i}=t,c=`anonymous_id=${encodeURIComponent(e)}&url=${encodeURIComponent(n)}&referrer=${encodeURIComponent(o)}`,s=new XMLHttpRequest,u=document.location.origin.split("."),l=document.location.protocol+"//www."+u.slice(u.length-2,u.length).join(".");s.responseType="text",s.open("POST",`${l}/detect-channel?${c}`),s.onreadystatechange=function(){s.readyState===a&&s.status===r&&i(JSON.parse(s.responseText).channel)},s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send()},f=function(t){return t.split(".").slice(-2).join(".")},p=function(){return!(document.referrer.substr(0,window.location.origin.length)===window.location.origin)&&!m()},m=function(){return l("uid")||l("was_logged_in")},g=function(){return i.a.get(c)||i.a.get(s)},h=function(t,e,n){const o=t.location.href,r=i.a.get(u);d({anonymousId:e,currentUrl:o,referrer:r,callback:n})},w="TRACKING_QUEUE";var y=class{constructor(t,e){this.windowObject=t,this.objectName=e,this.isStarted=!1;const n=sessionStorage.getItem(w);this.toCall=JSON.parse(n||"[]"),n||this.saveTrackingQueueToStorage()}push(t,...e){this.isStarted?this.callRealMethod(t,e):(this.toCall.push({methodName:t,args:e}),this.saveTrackingQueueToStorage())}start(){this.isStarted=!0,this.toCall.forEach((t=>{this.callRealMethod(t.methodName,t.args)})),this.clearTrackingQueue()}callRealMethod(t,e){this.windowObject[this.objectName][t](...e)}saveTrackingQueueToStorage(){sessionStorage.setItem(w,JSON.stringify(this.toCall))}clearTrackingQueue(){sessionStorage.setItem(w,JSON.stringify([]))}};class v{constructor(t){this.writeKey=t,function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var n=0;n<e.methods.length;n++){var o=e.methods[n];e[o]=e.factory(o)}e.load=function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},e.SNIPPET_VERSION="4.0.0";const i=setTimeout((()=>{e.load(t),clearTimeout(i)}),3e3)}}(),this.trackingQueue=new y(window,"analytics");var e=!1,n=!1;!g()&&p()?(console.debug("FormatAnalytics: updating first visit attribution cookies"),function(){const t=document.location.href,e=document.referrer,n=f(document.location.hostname);console.debug("FormatAnalytics: setting new first visit attribution cookies"),i.a.set(c,t,{domain:n,expires:90}),i.a.set(s,e,{domain:n,expires:90})}(),e=!0):g()&&!m()&&(console.debug("FormatAnalytics: prolonging first visit cookie expiry"),function(){const t=f(document.location.hostname),e=i.a.get(c),n=i.a.get(s);e&&i.a.set(c,e,{domain:t,expires:90}),n&&i.a.set(s,n,{domain:t,expires:90})}()),p()&&(console.debug("FormatAnalytics: updating last visit attribution cookies"),function(){const t=document.location.href,e=document.referrer,n=f(document.location.hostname);console.debug("FormatAnalytics: setting last visit attribution cookies"),i.a.set("last_visit_channel_url",t,{domain:n,expires:90}),i.a.set(u,e,{domain:n,expires:90})}(),n=!0),this.initialized=!1;const o=()=>{this.initialized=!0,this.trackingQueue.start()};window.analytics.ready((()=>{const t=window.analytics.user().anonymousId();e?(console.debug("FormatAnalytics: detecting first visit channel"),h(document,t,(t=>{window.analytics.identify({channel:t,last_channel:t}),o()}))):n?(console.debug("FormatAnalytics: detecting last visit channel"),h(document,t,(t=>{window.analytics.identify({last_channel:t}),o()}))):o()}))}track(t,e,n,o){window.Intercom&&window.Intercom("trackEvent",t,e),this.initialized||"function"!==typeof o?this.trackingQueue.push("track",t,e,n,o):o()}trackSubscriptionActivatedBasedEvent(t,e){"true"!==i.a.get("subscription_activated")&&(e.label="pre"),this.track(t,e)}identify(t,e,n,o){this.trackingQueue.push("identify",t,e,n,o)}page(t,e,n,o,i){const r=this.extractParams(window.location.search.substr(1).split("&"));n=Object.assign({},n,r),this.trackingQueue.push("page",t,e,n,o,i)}extractParams(t){const e={};t.forEach((function(t){const n=t.toLowerCase().split("=",2);1===n.length?e[n[0]]="":e[n[0]]=decodeURIComponent(n[1].replace(/\+/g," "))}));const n={};return["utm_campaign","utm_source","utm_medium","utm_term","utm_content"].forEach((function(t){e[t]&&(n[t]=e[t])})),n}}},809:function(t,e,n){"use strict";var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(t){o[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,c,s=a(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(o){c=o(n);for(var d=0;d<c.length;d++)r.call(n,c[d])&&(s[c[d]]=n[c[d]])}}return s}},907:function(t,e,n){var o,i;!function(r){if(void 0===(i="function"===typeof(o=r)?o.call(e,n,e,t):o)||(t.exports=i),!0,t.exports=r(),!!0){var a=window.Cookies,c=window.Cookies=r();c.noConflict=function(){return window.Cookies=a,c}}}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(o){function i(){}function r(e,n,r){if("undefined"!==typeof document){"number"===typeof(r=t({path:"/"},i.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(u){}n=o.write?o.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in r)r[s]&&(c+="; "+s,!0!==r[s]&&(c+="="+r[s].split(";")[0]));return document.cookie=e+"="+n+c}}function a(t,n){if("undefined"!==typeof document){for(var i={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var c=r[a].split("="),s=c.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=e(c[0]);if(s=(o.read||o)(s,u)||e(s),n)try{s=JSON.parse(s)}catch(l){}if(i[u]=s,t===u)break}catch(l){}}return t?i[t]:i}}return i.set=r,i.get=function(t){return a(t,!1)},i.getJSON=function(t){return a(t,!0)},i.remove=function(e,n){r(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))}},[[2637,54]]]);
//# sourceMappingURL=format_analytics-c7698ea3a084af9ac942.chunk.js.map